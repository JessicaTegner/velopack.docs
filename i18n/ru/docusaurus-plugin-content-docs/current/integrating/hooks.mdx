# Привязки приложений

<AppliesTo win />

Хуки позволяют вашему приложению запускать логику на различных этапах процесса установки/обновления/удаления.

В общем, я не рекомендую пытаться обрабатывать хуки вручную — вместо этого обратитесь к доступным опциям [VelopackApp](../reference/cs/Velopack/VelopackApp.md).

Если вы хотите справиться с этим самостоятельно, SDK для вашего языка не существует или вы просто хотите узнать о нем больше, читайте дальше.

## Перехватчики командной строки

На различных этапах процесса установки/обновления/удаления Velopack выполнит ваш основной исполняемый файл (тот, который указан при упаковке с помощью `--mainExe {exeName}`) с определенными аргументами командной строки и ожидает, что ваше приложение завершит работу как можно быстрее. . 

- `--veloapp-install {version}` Происходит после распаковки программы, но до завершения установки. Приложение должно обработать и выйти в течение 30 секунд.
- `--veloapp-obsolete {version}` Запускается в старой версии приложения до применения обновления. Приложение должно обработать и выйти в течение 15 секунд.
- `--veloapp-updated {version}` Запускается в новой версии приложения после применения обновления. Приложение должно обработать и выйти в течение 15 секунд.
- `--veloapp-uninstall {version}` Запускается перед удалением. Приложение должно обработать и выйти в течение 30 секунд.

В настоящее время во время перехватчиков нет возможности оставить отзыв о том, что вы хотели бы отменить установку/удаление/обновление и т. д., и вы не можете показывать пользователю какой-либо пользовательский интерфейс.

:::warning
Если ваше приложение получит один из этих аргументов и не завершится в течение отведенного времени, оно будет уничтожено.
:::

## Перехваты переменных среды

Также устанавливаются две переменные среды, если они обнаружены, вашему приложению не нужно завершать работу.

- `VELOPACK_FIRSTRUN` имеет значение true, если это первый запуск после установки приложения.
- `VELOPACK_RESTART` имеет значение true, если приложение было перезапущено Velopack (обычно из-за применения обновления).
