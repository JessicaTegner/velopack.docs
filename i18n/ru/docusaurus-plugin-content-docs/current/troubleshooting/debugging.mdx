# Отладка и журналирование

<AppliesTo all />
Найдите или настройте журналы приложений для обнаружения проблем во время выполнения.

## Ведение журнала

Во все части Velopack встроено ведение журнала, помогающее устранять неполадки, и вы должны предоставить эти журналы при открытии проблемы GitHub о потенциальной ошибке.

### UpdateManager / В вашем приложении

Вам следует предоставить экземпляр Microsoft.Extensions.Logging.ILogger для VelopackApp.Run(ILogger) и UpdateManager для регистрации потенциальных проблем. Если вы еще не используете Microsoft Hosting или Logging, очень просто реализовать этот интерфейс самостоятельно и выполнить вход в файл или интегрировать его с другой платформой журналирования. 

Например:

```cs
использование Microsoft.Extensions.Logging;

// ...

класс ConsoleLogger : ILogger
{
    public IDisposable BeginScope<TState>(состояние TState), где TState : notnull => null;
    public bool IsEnabled(LogLevel logLevel) => true;
    public void Log<TState>(LogLevel logLevel, EventId eventId, состояние TState, исключение исключения, Func<TState, Exception, string> форматировщик)
        => Console.WriteLine(formatter(state,Exception) ));
}

// ...

new UpdateManager("https://path.to/your-updates", logger: new ConsoleLogger());
```

### Окна

При запуске Update.exe большая часть вывода будет записываться в его базовый каталог как Velopack.log. По умолчанию файл Setup.exe не регистрируется в файле. Однако вы можете переопределить местоположение журнала для обоих двоичных файлов с помощью параметра `--log {path}`. Вы также можете использовать флаг `--verbose` для записи вывода отладки/трассировки в журнал. К сожалению, в Windows, чтобы избежать отображения в виде окна консоли, эти двоичные файлы компилируются как WinExe, и по умолчанию вывод на консоль не осуществляется.  Полный список поддерживаемых аргументов см. в [справке по командной строке](cli.mdx).

### МакОС/Линукс

Все журналы будут отправлены в `/tmp/velopack.log`.

## Расширенная отладка

Отладочные сборки двоичных файлов Velopack имеют дополнительные возможности ведения журнала/отладки и производят вывод на консоль. В некоторых случаях может оказаться полезным [скомпилировать Velopack](../contributing/compiling.mdx) для вашей платформы и заменить двоичные файлы выпусков Setup.exe и Update.exe отладочными версиями. 

Если ваша проблема связана со сборкой пакета, после сборки двоичных файлов Rust в режиме отладки также может быть полезно запустить проект Velopack.Vpk из Visual Studio с нужными аргументами командной строки, а не запускать инструмент `vpk` напрямую.

Если это не помогло, возможно, вам придется отладить и пройти через двоичные файлы Rust, для чего я рекомендую расширение CodeLLDB VSCode.
