---
sidebar_label: Обзор
sidebar_position: 0
---

# Обзор распространения

<AppliesTo all />
Распространять с помощью Velopack чрезвычайно просто: обычно это так же просто, как загрузить куда-нибудь файлы, которые можно будет загрузить по HTTP. Это означает, что вы можете разместить их на сайте IIS или nodejs, на общем хостинге файлов, таком как AWS S3, Azure Storage, BackBlaze B2, или даже бесплатно в выпусках GitHub/GitLab, если ваш проект имеет открытый исходный код.

Общие шаги по созданию и развертыванию выпуска Velopack:

1. Загрузите последнюю опубликованную версию (например, 1.0.0).
2. Запустите `vpk package`, чтобы создать новую версию (например, 1.0.1).
3. Загрузите недавно созданные ресурсы 1.0.1.
4. Обновите удаленные релизы.{channel}.json\`, чтобы отразить недавно загруженные ресурсы.

См. также: [Команды развертывания](deploy-cli.mdx) могут значительно упростить этот процесс.

## Список произведенных активов

После упаковки релиза с помощью Velopack в выходном каталоге у вас должно быть что-то вроде следующего:

```
Releases
├── YourAppId-1.0.1-full.nupkg
├── YourAppId-1.0.1-delta.nupkg
├── YourAppId-Setup.exe
├── YourAppId-Portable.zip
├── releases.{channel}.json
├── assets.{channel}.json
└── RELEASES
```

### Полные и дельта-нупки

Это пакеты обновлений, которые установленные приложения используют для поиска/установки последней версии. Полные пакеты содержат полную копию ваших входных файлов, а также некоторые файлы, которые добавляет Velopack. Дельта-пакет — это отличие от ранее созданного полного пакета. Вам необходимо загрузить предыдущую версию (например, 1.0.0 в приведенном выше примере) и разместить ее в выходном каталоге для создания дельты (в данном случае `1.0.0->1.0.0`). Существуют полезные [команды развертывания] \(deploy-cli.mdx), которые могут загрузить для вас последнюю версию, чтобы изменения создавались автоматически. 

Вы должны распространять эти пакеты в той же папке, что и файлы Releases.{channel}.json\` для работы обновлений. 

### Настройка и портативность

Это то, что ваш пользователь должен загрузить и запустить, чтобы установить ваше приложение. В MacOS вы получите .pkg вместо -Setup.exe. В Linux установка не производится - только портативный `.AppImage`. Причина этого в том, что .AppImage полностью переносимы на любой относительно недавний дистрибутив Linux.

### Лента релизов (`releases.{channel}.json`)

Этот файл следует распространять в той же папке, где развертываются файлы `nupkg`. Он содержит список всех доступных выпусков. 

Когда вы предоставляете URL-адрес HTTP для UpdateManager, он будет искать этот файл. Например, если вы используете новый UpdateManager("https://the.place/you-host/updates"), то UpdateManager запросит https://the.place/you-host/updates/releases.{channel}.json\`. Канал, который UpdateManager использует в запросе, является автоматическим, вы можете [подробнее узнать о каналах здесь](../packaging/channels.mdx). 

Например, если вы упаковали «1.0.0», а затем сразу после этого «1.0.1», содержимое этого файла может выглядеть так:

```json title="releases.win.json"
{
  "Assets": [
    {
      "PackageId": "YourAppId",
      "Version": "1.0.1",
      "Type": "Full",
      "FileName": "YourAppId-1.0.1-full.nupkg",
      "SHA1": "537EC0F4E1C4263A230353FAB4150216E5AF3724",
      "Size": 1588612
    },
    {
      "PackageId": "YourAppId",
      "Version": "1.0.1",
      "Type": "Delta",
      "FileName": "YourAppId-1.0.1-delta.nupkg",
      "SHA1": "9615D266DDBCADF3B9CD82BABF9DA571A0EE2B83",
      "Size": 3606
    },
    {
      "PackageId": "YourAppId",
      "Version": "1.0.0",
      "Type": "Full",
      "FileName": "YourAppId-1.0.0-full.nupkg",
      "SHA1": "69122BABCEEEF9F653BFE59D87DDAEF363F9476F",
      "Size": 1588613
    }
  ]
}
```

Файл выпусков всегда должен отражать файлы, которые _действительно доступны_ в удаленной папке, содержащей файл выпусков. Поэтому, если вы удаляете выпуск nupkg с удаленного сервера, вам следует удалить его и из файла удаленного выпуска. Если вы развертываете вновь созданные локальные файлы на удаленном сервере, который уже содержит некоторые выпуски, вам следует скопировать ресурсы из локального файла в файл удаленных выпусков. 

:::warning
Этот файл — единственный способ, с помощью которого UpdateManager может обнаруживать выпуски. Если вы не обновите его должным образом, это может привести к тому, что ваши пользователи не будут получать обновления.
:::

Обновлять этот файл вручную утомительно, поэтому Velopack CLI предоставляет команды развертывания, которые могут развертывать ресурсы и автоматически обновлять этот файл для вас, а также применять политики хранения в отношении количества сохраняемых выпусков. [\[Подробнее\]](deploy-cli.mdx)

### Фид устаревших выпусков ("РЕЛИЗЫ")

Этот формат выпусков использовался Clowd.Squirrel и Squirrel.Windows и до сих пор создается Velopack, чтобы позволить вам перенести приложение с использованием одной из этих платформ на Velopack. Если у вас нет устаревших пользователей, которым необходимо перейти на Velopack, вы можете смело игнорировать этот файл.

### Файл ресурсов

Этот файл содержит список ресурсов, созданных последней командой Pack. Он используется [командами развертывания Velopack] \(deploy-cli.mdx), чтобы узнать, какие файлы следует загрузить. Его можно игнорировать/удалять, если вы не собираетесь использовать эти команды для развертывания выпусков и автоматического обновления ленты выпусков.
