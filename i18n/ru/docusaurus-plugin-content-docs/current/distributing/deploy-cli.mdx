# Интерфейс командной строки развертывания

<AppliesTo all />
Общий процесс развертывания выпуска Velopack («загрузка -> пакет -> загрузка») можно значительно упростить, используя команды «download» и «upload», встроенные в ` vpk` инструмент командной строки.

## Упаковка вашего нового релиза с помощью delta

Чтобы во время команды `pack` были сгенерированы дельты, вам необходимо сначала загрузить текущую последнюю версию. Это нужно сделать с помощью команды загрузки:

```cmd
скачать vpk http --url https://the.place/you-host/updates
vpk package -u YourAppId -v 1.0.1 -p {buildOutput}
```

Существуют провайдеры для различных источников, таких как GitHub, S3, HTTP и т. д.

## Развертывание релизов

В предыдущем примере мы использовали источник http, хотя он и очень общий, он не предоставляет никакой информации о том, как загружать выпуски, поэтому в следующем примере развертывания мы будем использовать [AWS S3]\(https://aws .amazon.com/s3/). 

:::tip
Большинство поставщиков облачных хранилищ сегодня имеют S3-совместимый API ([GCP](https://cloud.google.com/storage/docs/interoperability), [BackBlaze B2]\(https://www.backblaze.com/docs/ cloud-storage-s3-совместимый-api), [DigitalOcean](https://docs.digitalocean.com/products/spaces/how-to/use-aws-sdks/), [Linode]\(https://www .linode.com/docs/products/storage/object-storage/), [IBM Cloud]\(https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-compatibility- api) и т. д.) и может использоваться с этой командой — она не ограничивается AWS.
:::

Используя AWS, вы можете [аутентифицироваться с помощью инструмента командной строки `aws`](https://docs.aws.amazon.com/sdk-for-net/v3/developer-guide/creds-idc.html) или предоставьте ключи доступа, как показано ниже. 

Если вы используете AWS SSO, вам следует проверить [AWS CLI SSO]\(https://aws.amazon.com/blogs/security/aws-single-sign-on-now-enables-command-line-interface-access -for-aws-accounts-using-corporate-credentials/) и [аутентификация сеанса AWS] \(https://docs.aws.amazon.com/STS/latest/APIReference/API_GetSessionToken.html).

```cmd
vpk download s3 --bucket MyApp --region us-west-1 --keyId {accessKeyId} --secret {accessKeySecret}
vpk pack -u YourAppId -v 1.0.1 -p {buildOutput}
vpk upload s3 --bucket MyApp --region us-west-1 --keyId {accessKeyId} --secret {accessKeySecret} 
```

Обратите внимание, что вы также можете указать большинство этих аргументов как переменные среды. Вы можете просмотреть [переменные среды AWS SDK здесь] \(https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html), и каждый параметр `vpk` может быть предоставлен в качестве среды. переменную тоже, чтобы перечислить их в тексте справки, используйте `vpk -H` вместо `vpk -h`. 

При использовании API, не совместимого с AWS S3 (например, BackBlaze B2), вам необходимо указать конечную точку вместо региона:

```cmd
vpk download s3 --bucket MyApp --endpoint https://s3.eu-central-003.backblazeb2.com --keyId {accessKeyId} --secret {accessKeySecret}
vpk pack -u YourAppId -v 1.0.1 -p {buildOutput}
vpk upload s3 --bucket MyApp --endpoint https://s3.eu-central-003.backblazeb2.com --keyId {accessKeyId} --secret {accessKeySecret} 
```
