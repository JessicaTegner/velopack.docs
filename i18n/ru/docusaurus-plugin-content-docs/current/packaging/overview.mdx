---
sidebar_label: Обзор
sidebar_position: 0
---

# Обзор упаковки

<AppliesTo all />

Упаковка выпуска осуществляется с помощью команды «pack» в Velopack. Независимо от вашей операционной системы, общие обязательные аргументы примерно одинаковы. 

## Создание вашего первого релиза

Сначала вам следует скомпилировать свое приложение с помощью любой цепочки инструментов, которую вы обычно используете (например, «dotnetPublish», «msbuild.exe» и т. д.). 
Впредь это будет называться `{build_dir}`.

### Обязательные аргументы

- `--packId {id}` Уникальный идентификатор вашего приложения. Оно должно быть достаточно уникальным, чтобы другие авторы приложений не могли столкнуться с вашим приложением.
- `--packVersion {version}` Текущая версия, которую вы выпускаете - в [формате semver2](https://semver.org/) (например, `1.0.0-build.23+metadata`). 
- `--packDir {build_dir}` Папка, содержащая скомпилированное приложение.
- `--mainExe {exeName}` Основной исполняемый файл, который будет запущен после установки, и двоичный файл, который будет [обрабатывать хуки Velopack](../integrating/overview.mdx).
- `--icon {path}` Значок, используемый для связывания вашего приложения. Требуется только в MacOS и Linux.

:::tip
Velopack не поддерживает версии из 4 частей (например, `1.0.0.0`), поскольку было бы непрактично поддерживать оба формата одновременно, а semver2 предлагает гораздо большую гибкость.
:::

Полный пример:

```cmd
dotnetPublish -c Release -r win-x64 -o опубликовать
vpk package --packId MyAppId -packVersion 1.0.0 --packDir опубликовать --mainExe MyApp.exe
```

### Необязательные рекомендуемые аргументы

Существует множество необязательных аргументов, лучший способ узнать, какие функции доступны для вашей операционной системы, — проверить `vpk package -h`. Упомянем пару:

- `--packTitle {name}` Понятное имя вашего приложения, отображаемое пользователям в диалоговых окнах, ярлыках и т. д.
- `--outputDir {path}` Местоположение, в котором Velopack должен создавать финальные выпуски (по умолчанию `.\Releases`)

### Выпуск выпуска

Когда сборка релиза завершена, в вашем `--outputDir` должны быть следующие ресурсы:

- `MyAppId-1.0.0-full.nupkg` — полная версия: содержит весь пакет обновлений.
- `MyAppId-1.0.0-delta.nupkg` — дельта-версия: только если существовала предыдущая версия, на основе которой можно было создать дельту. Их сборка/развертывание не являются обязательными, но они ускоряют процесс обновления серверов, поскольку им нужно загружать только то, что изменилось между версиями, а не полный пакет.
- `MyAppId-Portable.zip` — портативная версия: ее можно развернуть дополнительно, чтобы пользователи могли запускать и обновлять ваше приложение без установки.
- `MyAppId-Setup.exe` — установщик: используется большинством пользователей для установки приложения в локальную файловую систему.
- `релизы.{channel}.json` — Индекс выпусков: список всех доступных выпусков. Используется UpdateManager для поиска последней применимой версии.
- `RELEASES` — файл устаревших релизов: используется только для клиентов [мигрирующих на Velopack](../migrating/squirrel.mdx) из Squirrel.
- `активы.{channel}.json` — Ресурсы сборки: список ресурсов, созданных в самой последней сборке. Используется [командами развертывания Velopack](../distributing/overview.mdx).

Вам не нужно развертывать все эти файлы, чтобы пользователи могли обновляться, поэтому вам следует просмотреть [руководство по развертыванию](../distributing/overview.mdx) для получения дополнительной информации о том, какие файлы следует распространять.

:::tip
Для Linux не существует пакета установки/установки. Программа распространяется как самообновляющийся файл `.AppImage`. Причина в том, что `.AppImage` будет работать практически на каждом современном дистрибутиве без каких-либо дополнительных зависимостей. Просто загрузите `.AppImage`, запустите `chmod +x` и щелкните по нему, чтобы начать. Можно установить `.AppImage`, но пользователю остается установить что-то вроде [appimaged]\(https://github.com/probonopd/go-appimage/blob/master/src/appimaged/README .mdx) или [AppImageLauncher](https://github.com/TheAssassin/AppImageLauncher).
:::

## Подписание кода

Хотя это не требуется для локальных сборок/тестирования, вам всегда следует подписывать код вашего приложения перед его распространением среди пользователей. 

:::tip
Если вы не подпишете код, ваше приложение может не запуститься. [\[Подробнее\]](signing.mdx)
:::

## Настройка установщика

На платформах, поставляющих установщики, вы можете настроить поведение. [\[Подробнее\]](installer.mdx)

## Другие рекомендуемые аргументы

- Если ваше приложение зависит от операционной системы или архитектуры процессора, вам следует рассмотреть возможность добавления --rid\`. [\[Подробнее\]](rid.mdx)
- Если вы планируете распространять каналы выпусков для разных архитектур или функций, рассмотрите возможность добавления `--channel` [\[Подробнее\]](channels.mdx)
- Если вашему приложению требуются дополнительные платформы (например, vcredist), рассмотрите `--framework` [\[Подробнее\]](bootstrapping.mdx)
