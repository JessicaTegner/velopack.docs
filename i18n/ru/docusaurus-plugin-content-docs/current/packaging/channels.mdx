# Каналы выпуска

<AppliesTo all />
Каналы — это фундаментальная часть того, как Velopack понимает и создает релизы. Каждый выпуск должен принадлежать каналу. Если вы не укажете канал при создании выпуска (с помощью аргумента `--channel`), каналом по умолчанию будет имя целевой операционной системы (например, `win`, `osx` или `linux`). .

При создании релизов Velopack создаст файл Releases.{channel}.json`файл, который следует загрузить вместе с другими вашими ресурсами (например,`.nupkg`). Вот как `UpdateManager\` узнает, какие версии доступны.

В общем, вам не следует предоставлять канал конструктору UpdateManager (оставьте его нулевым). В этом случае он будет искать пакеты обновлений только в том же канале, для которого была создана текущая версия. Например, если вы предоставили аргумент `--channel стабильный` для `vpk` и установили приложение, то `UpdateManager` будет автоматически искать файл `releases.stable.json` при проверке наличия обновлений.

:::tip
Для устаревших целей Velopack также создаст файл `RELEASES` (для канала `win`) или файл `RELEASES-{channel}` (для любого другого канала). Развертывая эти файлы, а также файлы Releases.{channel}.json\` позволит устаревшим приложениям обновляться до Velopack. Если у вас нет пользователей устаревших версий вашего программного обеспечения, вы можете игнорировать эти файлы.
:::

## Переключение каналов в установленных приложениях

Часто желательно предоставить пользователям возможность легко переключать каналы. Например, если ваши пользователи скачали установщик «стабильной» версии вашего приложения, они будут получать обновления только для «стабильного» канала. Позже они решают переключиться на «бета-канал», чтобы опробовать некоторые экспериментальные функции вашего приложения. 

Это можно сделать, указав ненулевой аргумент канала конструктору UpdateManager. Таким образом, вы должны создать экземпляр `new UpdateManager("https://the.place/you-store/updates", "beta")`, а затем выполнить процесс обновления как обычно.

## Развертывание кроссплатформенных приложений

При развертывании кросс-платформенных (или кросс-архитектурных) приложений важно, чтобы каждая уникальная ОС/rid имела собственный канал. Было бы нехорошо, если бы ваше приложение для Windows попыталось установить пакет OSX и т. д.!

Каналами по умолчанию являются `win`, `osx` или `linux`, поэтому, если вы распространяете только один выпуск на каждую платформу, вам не нужно указывать аргумент канала, все должно работать автоматически. Если вы распространяете функциональные каналы (например, «стабильная», «бета») или вам необходимо распространять несколько версий вашего приложения для каждой ОС (например, «win-x64», «win-arm64»), вам необходимо определить стратегия канала, которая не конфликтует. 

Например, если бы я распространял приложение для Windows и OSX, которое должно было поддерживать x64 и Arm64, а также поддерживать «стабильную» и «бета-версию», то мне понадобились бы следующие 8 каналов:

- Win-x64-стабильный
- Win-x64-бета
- win-arm64-стабильный
- победа-arm64-бета
- OSX-x64-стабильный
- OSX-x64-бета
- OSX-ARM64-стабильный
- OSX-ARM64-бета

## Переименование канала

Вы не можете переименовать канал по отдельности, но можете заменить его (т. е. заставить всех ваших пользователей переключиться на новый канал). Представьте, что до сих пор вы публиковали приложение, которое поддерживает только Windows x64, на «стабильном» канале, но теперь вы хотите выпустить версию своего приложения для Arm64. Итак, вы хотите перевести всех пользователей со «стабильной» версии на «win-x64», а также создать новый канал с именем «win-arm64». 

Вам следует опубликовать следующее обновление (скажем, v2.0.0), используя `--channel win-x64`, что создаст новый файл `releases.win-x64.json`. Теперь вы можете скопировать этот файл, переименовать его в Releases.stable.json и развернуть оба файла вместе с файлом v2.0.0 `.nupkg` на сервере обновлений. Любые пользователи «стабильного» канала найдут файл «releases.stable.json» и обновятся до вашей версии v2.0.0 win-x64, а после этого будут искать будущие обновления по адресу «releases.win-x64.json». Вам нужно сделать это только один раз, вам не нужно будет снова обновлять файл Releases.stable.json, однако вы, возможно, не захотите его удалять, чтобы пользователи, которые не открывали ваше приложение какое-то время, могли найти новые обновления. .
